{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport axios from \"axios\";\nexport default {\n  data() {\n    return {\n      form: {\n        contact_number: \"\",\n        address: \"\",\n        payment_method: \"\"\n      },\n      isLoading: false\n    };\n  },\n  computed: {\n    totalItems() {\n      const cart = JSON.parse(localStorage.getItem(\"cartItems\")) || [];\n      return cart.reduce((sum, item) => sum + item.quantity, 0);\n    },\n    totalPrice() {\n      const cart = JSON.parse(localStorage.getItem(\"cartItems\")) || [];\n      return cart.reduce((total, item) => total + item.price * item.quantity, 0).toFixed(2);\n    },\n    cartItems() {\n      return JSON.parse(localStorage.getItem(\"cartItems\")) || [];\n    }\n  },\n  methods: {\n    validateContactNumber() {\n      this.form.contact_number = this.form.contact_number.replace(/[^0-9]/g, \"\");\n    },\n    validateForm() {\n      // Check contact number\n      if (!this.form.contact_number || this.form.contact_number.length !== 11 || !/^\\d+$/.test(this.form.contact_number)) {\n        alert(\"Please enter a valid 11-digit contact number\");\n        return false;\n      }\n\n      // Check address\n      if (!this.form.address || this.form.address.trim().length < 10) {\n        alert(\"Please enter a complete shipping address (at least 10 characters)\");\n        return false;\n      }\n\n      // Check payment method\n      if (!this.form.payment_method) {\n        alert(\"Please select a payment method\");\n        return false;\n      }\n\n      // Check cart items\n      if (!this.cartItems || this.cartItems.length === 0) {\n        alert(\"Your cart is empty\");\n        this.$router.push('/cart');\n        return false;\n      }\n      return true;\n    },\n    async checkout() {\n      try {\n        // Validate form first\n        if (!this.validateForm()) {\n          return;\n        }\n        this.isLoading = true;\n\n        // Prepare order items\n        const items = this.cartItems.map(item => ({\n          product_id: item.id || item.product_id,\n          quantity: parseInt(item.quantity),\n          price: parseFloat(item.price)\n        }));\n\n        // Calculate total price including shipping\n        const total_price = parseFloat(this.totalPrice) + 58;\n\n        // Send order to backend\n        const response = await axios.post(\"http://localhost:5555/orders\", {\n          contact_number: this.form.contact_number,\n          address: this.form.address,\n          payment_method: this.form.payment_method,\n          total_price: total_price.toFixed(2),\n          items: items\n        }, {\n          withCredentials: true\n        });\n\n        // Show success message\n        alert(response.data.message || \"Order placed successfully!\");\n\n        // Clear cart from localStorage\n        localStorage.removeItem(\"cartItems\");\n        this.$store.commit(\"clearCart\"); // Clear Vuex store if you're using it\n\n        // Redirect to thank you page or order history\n        this.$router.push(\"/order-history\");\n      } catch (error) {\n        console.error(\"Checkout error:\", error);\n        if (error.response?.status === 401) {\n          alert(\"Please login to place your order\");\n          localStorage.setItem('redirectAfterLogin', '/checkout');\n          this.$router.push(\"/login\");\n        } else if (error.response?.status === 400) {\n          alert(error.response.data.message || \"Please check your order details\");\n        } else {\n          alert(\"Failed to place order. Please try again later.\");\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    goToCart() {\n      this.$router.push(\"/cart\");\n    }\n  },\n  async created() {\n    try {\n      // Check if cart has items\n      if (this.cartItems.length === 0) {\n        alert('Your cart is empty');\n        this.$router.push('/cart');\n        return;\n      }\n\n      // Check if user is logged in\n      const response = await axios.get(\"http://localhost:5555/check-session\", {\n        withCredentials: true\n      });\n\n      // If response is successful but user is not logged in\n      if (!response.data.loggedIn) {\n        alert('Please login to proceed with checkout');\n        // Save current path to redirect back after login\n        localStorage.setItem('redirectAfterLogin', '/checkout');\n        this.$router.push('/login');\n        return;\n      }\n    } catch (error) {\n      console.error('Error during initialization:', error);\n      if (error.response?.status === 401) {\n        alert('Please login to proceed with checkout');\n        // Save current path to redirect back after login\n        localStorage.setItem('redirectAfterLogin', '/checkout');\n        this.$router.push('/login');\n      } else {\n        alert('Failed to initialize checkout. Please try again.');\n        this.$router.push('/cart');\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","form","contact_number","address","payment_method","isLoading","computed","totalItems","cart","JSON","parse","localStorage","getItem","reduce","sum","item","quantity","totalPrice","total","price","toFixed","cartItems","methods","validateContactNumber","replace","validateForm","length","test","alert","trim","$router","push","checkout","items","map","product_id","id","parseInt","parseFloat","total_price","response","post","withCredentials","message","removeItem","$store","commit","error","console","status","setItem","goToCart","created","get","loggedIn"],"sources":["C:\\laragon\\www\\project_appdev\\Frontend\\src\\views\\checkout.vue"],"sourcesContent":["<template>\n  <div class=\"checkout-page\">\n    <div class=\"checkout-container\">\n      <h1>Checkout</h1>\n      \n      <div class=\"checkout-grid\">\n        <!-- Left Column: Personal Information -->\n        <div class=\"checkout-form\">\n          <div class=\"form-card\">\n            <div class=\"card-header\">\n              <h3>Personal Information</h3>\n              <p class=\"subtitle\">Please fill in your details for delivery</p>\n            </div>\n            <div class=\"card-body\">\n              <form @submit.prevent=\"checkout\" class=\"needs-validation\" novalidate>\n                <div class=\"form-group\">\n                  <label for=\"contact-number\">Contact Number</label>\n                  <div class=\"input-wrapper\">\n                    <span class=\"input-icon\">üì±</span>\n                    <input\n                      type=\"tel\"\n                      id=\"contact-number\"\n                      v-model=\"form.contact_number\"\n                      required\n                      placeholder=\"Enter your contact number\"\n                      @input=\"validateContactNumber\"\n                      maxlength=\"11\"\n                      pattern=\"[0-9]{11}\"\n                    />\n                  </div>\n                  <div class=\"invalid-feedback\">Please enter a valid 11-digit contact number.</div>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"address\">Shipping Address</label>\n                  <div class=\"input-wrapper\">\n                    <span class=\"input-icon\">üìç</span>\n                    <textarea\n                      id=\"address\"\n                      v-model=\"form.address\"\n                      required\n                      placeholder=\"Enter your complete shipping address\"\n                    ></textarea>\n                  </div>\n                  <div class=\"invalid-feedback\">Please enter your address.</div>\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"payment_method\">Payment Method</label>\n                  <div class=\"input-wrapper\">\n                    <span class=\"input-icon\">üí≥</span>\n                    <select v-model=\"form.payment_method\" id=\"payment_method\" required>\n                      <option value=\"\" disabled selected>Select payment method</option>\n                      <option value=\"check_payment\">Check Payment</option>\n                      <option value=\"cod\">Cash on Delivery (COD)</option>\n                    </select>\n                  </div>\n                  <div class=\"invalid-feedback\">Please select a payment method.</div>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n\n        <!-- Right Column: Order Summary -->\n        <div class=\"order-summary\">\n          <div class=\"summary-card\">\n            <div class=\"card-header\">\n              <h3>Order Summary</h3>\n              <p class=\"subtitle\">Review your order details</p>\n            </div>\n            <div class=\"card-body\">\n              <!-- Show cart items -->\n              <div class=\"cart-items\">\n                <div v-for=\"item in cartItems\" :key=\"item.id\" class=\"cart-item\">\n                  <div class=\"item-details\">\n                    <div class=\"item-info\">\n                      <h4>{{ item.name }}</h4>\n                      <p>Quantity: {{ item.quantity }}</p>\n                      <p class=\"item-price\">‚Ç±{{ (item.price * item.quantity).toFixed(2) }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"summary-list\">\n                <div class=\"summary-item\">\n                  <span>Total Items</span>\n                  <span class=\"value\">{{ totalItems }} items</span>\n                </div>\n                <div class=\"summary-item\">\n                  <span>Subtotal</span>\n                  <span class=\"value\">‚Ç±{{ totalPrice }}</span>\n                </div>\n                <div class=\"summary-item\">\n                  <span>Shipping Fee</span>\n                  <span class=\"value\">‚Ç±58.00</span>\n                </div>\n                <div class=\"summary-total\">\n                  <span>Total Amount</span>\n                  <span class=\"value\">‚Ç±{{ (parseFloat(totalPrice) + 58).toFixed(2) }}</span>\n                </div>\n              </div>\n\n              <div class=\"action-buttons\">\n                <button \n                  type=\"submit\" \n                  class=\"btn-place-order\" \n                  @click=\"checkout\"\n                  :disabled=\"isLoading\"\n                >\n                  {{ isLoading ? 'Processing...' : 'Place Order' }}\n                </button>\n                <button \n                  type=\"button\" \n                  class=\"btn-back\" \n                  @click=\"goToCart\"\n                  :disabled=\"isLoading\"\n                >\n                  Back to Cart\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      form: {\n        contact_number: \"\",\n        address: \"\",\n        payment_method: \"\",\n      },\n      isLoading: false,\n    };\n  },\n  computed: {\n    totalItems() {\n      const cart = JSON.parse(localStorage.getItem(\"cartItems\")) || [];\n      return cart.reduce((sum, item) => sum + item.quantity, 0);\n    },\n    totalPrice() {\n      const cart = JSON.parse(localStorage.getItem(\"cartItems\")) || [];\n      return cart\n        .reduce((total, item) => total + item.price * item.quantity, 0)\n        .toFixed(2);\n    },\n    cartItems() {\n      return JSON.parse(localStorage.getItem(\"cartItems\")) || [];\n    }\n  },\n  methods: {\n    validateContactNumber() {\n      this.form.contact_number = this.form.contact_number.replace(/[^0-9]/g, \"\");\n    },\n    \n    validateForm() {\n      // Check contact number\n      if (!this.form.contact_number || this.form.contact_number.length !== 11 || !/^\\d+$/.test(this.form.contact_number)) {\n        alert(\"Please enter a valid 11-digit contact number\");\n        return false;\n      }\n\n      // Check address\n      if (!this.form.address || this.form.address.trim().length < 10) {\n        alert(\"Please enter a complete shipping address (at least 10 characters)\");\n        return false;\n      }\n\n      // Check payment method\n      if (!this.form.payment_method) {\n        alert(\"Please select a payment method\");\n        return false;\n      }\n\n      // Check cart items\n      if (!this.cartItems || this.cartItems.length === 0) {\n        alert(\"Your cart is empty\");\n        this.$router.push('/cart');\n        return false;\n      }\n\n      return true;\n    },\n\n    async checkout() {\n      try {\n        // Validate form first\n        if (!this.validateForm()) {\n          return;\n        }\n\n        this.isLoading = true;\n\n        // Prepare order items\n        const items = this.cartItems.map(item => ({\n          product_id: item.id || item.product_id,\n          quantity: parseInt(item.quantity),\n          price: parseFloat(item.price)\n        }));\n\n        // Calculate total price including shipping\n        const total_price = parseFloat(this.totalPrice) + 58;\n\n        // Send order to backend\n        const response = await axios.post(\n          \"http://localhost:5555/orders\",\n          {\n            contact_number: this.form.contact_number,\n            address: this.form.address,\n            payment_method: this.form.payment_method,\n            total_price: total_price.toFixed(2),\n            items: items\n          },\n          {\n            withCredentials: true\n          }\n        );\n\n        // Show success message\n        alert(response.data.message || \"Order placed successfully!\");\n\n        // Clear cart from localStorage\n        localStorage.removeItem(\"cartItems\");\n        this.$store.commit(\"clearCart\"); // Clear Vuex store if you're using it\n\n        // Redirect to thank you page or order history\n        this.$router.push(\"/order-history\");\n\n      } catch (error) {\n        console.error(\"Checkout error:\", error);\n        \n        if (error.response?.status === 401) {\n          alert(\"Please login to place your order\");\n          localStorage.setItem('redirectAfterLogin', '/checkout');\n          this.$router.push(\"/login\");\n        } else if (error.response?.status === 400) {\n          alert(error.response.data.message || \"Please check your order details\");\n        } else {\n          alert(\"Failed to place order. Please try again later.\");\n        }\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    goToCart() {\n      this.$router.push(\"/cart\");\n    }\n  },\n  async created() {\n    try {\n      // Check if cart has items\n      if (this.cartItems.length === 0) {\n        alert('Your cart is empty');\n        this.$router.push('/cart');\n        return;\n      }\n\n      // Check if user is logged in\n      const response = await axios.get(\"http://localhost:5555/check-session\", {\n        withCredentials: true\n      });\n\n      // If response is successful but user is not logged in\n      if (!response.data.loggedIn) {\n        alert('Please login to proceed with checkout');\n        // Save current path to redirect back after login\n        localStorage.setItem('redirectAfterLogin', '/checkout');\n        this.$router.push('/login');\n        return;\n      }\n\n    } catch (error) {\n      console.error('Error during initialization:', error);\n      if (error.response?.status === 401) {\n        alert('Please login to proceed with checkout');\n        // Save current path to redirect back after login\n        localStorage.setItem('redirectAfterLogin', '/checkout');\n        this.$router.push('/login');\n      } else {\n        alert('Failed to initialize checkout. Please try again.');\n        this.$router.push('/cart');\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.checkout-page {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);\n  padding: 3rem 1rem;\n  font-family: \"Poppins\", sans-serif;\n}\n\n.checkout-container {\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\nh1 {\n  text-align: center;\n  font-size: 2.5rem;\n  font-weight: 700;\n  color: #1a202c;\n  margin-bottom: 3rem;\n  position: relative;\n}\n\nh1::after {\n  content: '';\n  position: absolute;\n  bottom: -10px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 60px;\n  height: 4px;\n  background: linear-gradient(90deg, #4f46e5, #7c3aed);\n  border-radius: 2px;\n}\n\n.checkout-grid {\n  display: grid;\n  grid-template-columns: 1.2fr 1fr;\n  gap: 2rem;\n  align-items: start;\n}\n\n.form-card, .summary-card {\n  background: white;\n  border-radius: 20px;\n  overflow: hidden;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  position: relative;\n}\n\n.form-card::before, .summary-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, #4f46e5, #7c3aed);\n}\n\n.card-header {\n  padding: 2rem 2rem 1rem;\n}\n\n.card-header h3 {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1a202c;\n  margin: 0;\n}\n\n.subtitle {\n  color: #64748b;\n  margin-top: 0.5rem;\n  font-size: 0.95rem;\n}\n\n.card-body {\n  padding: 1rem 2rem 2rem;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-group label {\n  display: block;\n  font-weight: 600;\n  color: #1a202c;\n  margin-bottom: 0.5rem;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.input-icon {\n  position: absolute;\n  left: 1rem;\n  font-size: 1.2rem;\n}\n\ninput, textarea, select {\n  width: 100%;\n  padding: 0.75rem 1rem 0.75rem 3rem;\n  border: 2px solid #e2e8f0;\n  border-radius: 12px;\n  font-size: 1rem;\n  color: #1a202c;\n  transition: all 0.3s ease;\n  background: #f8fafc;\n}\n\ntextarea {\n  min-height: 100px;\n  resize: vertical;\n}\n\ninput:focus, textarea:focus, select:focus {\n  border-color: #4f46e5;\n  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);\n  outline: none;\n}\n\n.invalid-feedback {\n  color: #ef4444;\n  font-size: 0.875rem;\n  margin-top: 0.25rem;\n  display: none;\n}\n\n.summary-list {\n  margin-bottom: 2rem;\n}\n\n.summary-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 1rem 0;\n  color: #64748b;\n  font-size: 1rem;\n}\n\n.summary-item:not(:last-child) {\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.summary-total {\n  display: flex;\n  justify-content: space-between;\n  padding: 1.5rem 0;\n  border-top: 2px solid #e2e8f0;\n  margin-top: 1rem;\n  font-weight: 700;\n  color: #1a202c;\n  font-size: 1.2rem;\n}\n\n.value {\n  color: #1a202c;\n  font-weight: 600;\n}\n\n.action-buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.btn-place-order {\n  width: 100%;\n  padding: 1rem;\n  background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 1.1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.btn-place-order:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.2);\n}\n\n.btn-back {\n  width: 100%;\n  padding: 1rem;\n  background: #f1f5f9;\n  color: #64748b;\n  border: none;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.btn-back:hover {\n  background: #e2e8f0;\n  color: #1a202c;\n}\n\n.cart-items {\n  margin-bottom: 1.5rem;\n  max-height: 300px;\n  overflow-y: auto;\n  padding-right: 10px;\n}\n\n.cart-item {\n  padding: 1rem;\n  border-bottom: 1px solid #e2e8f0;\n}\n\n.item-details {\n  display: flex;\n  gap: 1rem;\n}\n\n.item-info {\n  flex: 1;\n}\n\n.item-info h4 {\n  font-size: 0.9rem;\n  margin: 0 0 0.5rem;\n}\n\n.item-info p {\n  font-size: 0.8rem;\n  color: #64748b;\n  margin: 0;\n}\n\n.item-price {\n  font-weight: 600;\n  color: #4f46e5 !important;\n}\n\n.btn-place-order:disabled,\n.btn-back:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n\n@media (max-width: 1024px) {\n  .checkout-grid {\n    grid-template-columns: 1fr;\n    max-width: 700px;\n    margin: 0 auto;\n  }\n}\n\n@media (max-width: 640px) {\n  .checkout-page {\n    padding: 2rem 1rem;\n  }\n\n  h1 {\n    font-size: 2rem;\n    margin-bottom: 2rem;\n  }\n\n  .card-header {\n    padding: 1.5rem 1.5rem 1rem;\n  }\n\n  .card-body {\n    padding: 1rem 1.5rem 1.5rem;\n  }\n\n  input, textarea, select {\n    font-size: 0.95rem;\n  }\n\n  .btn-place-order, .btn-back {\n    padding: 0.875rem;\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}